{{define "dashboard-content"}}
  {{template "dashboard-layout" .}}
{{end}}

{{define "dashboard-page-content"}}
  {{template "dashboard-jobs-content" .}}
{{end}}

{{define "dashboard-jobs-content"}}
<div class="flex flex-col flex-1 overflow-hidden">
  {{if .error}}
  <div class="bg-red-900 bg-opacity-50 border border-red-800 text-red-100 px-4 py-3 rounded mb-6">
    <p>{{.error}}</p>
  </div>
  {{end}}
  
  <!-- Fixed Top Content -->
  <div class="flex-none">
    <!-- Stats -->
    <div class="grid grid-cols-3 gap-3 md:gap-4 mb-6">
      {{template "partials/stats-card-jobs" .}}
      {{template "partials/stats-card-applied" .}}
      {{template "partials/stats-card-match" .}}
    </div>

    <!-- Filtering Controls -->
    <div class="flex flex-col sm:flex-row gap-3 mb-6">
      <select
        id="status-filter"
        class="bg-slate-700 text-white border-slate-600 rounded-md px-3 py-2 text-sm w-full sm:w-auto"
        hx-get="/jobs"
        hx-trigger="change"
        hx-target="#jobs-container"
        hx-push-url="true"
        name="status"
      >
        <option value="all" {{if or (eq .statusFilter "") (eq .statusFilter "all")}}selected{{end}}>All Jobs</option>
        <option value="interested" {{if eq .statusFilter "interested"}}selected{{end}}>Interested</option>
        <option value="applied" {{if eq .statusFilter "applied"}}selected{{end}}>Applied</option>
        <option value="interviewing" {{if eq .statusFilter "interviewing"}}selected{{end}}>Interviewing</option>
        <option value="offer received" {{if eq .statusFilter "offer received"}}selected{{end}}>Offer Received</option>
        <option value="rejected" {{if eq .statusFilter "rejected"}}selected{{end}}>Rejected</option>
        <option value="not interested" {{if eq .statusFilter "not interested"}}selected{{end}}>Not Interested</option>
      </select>
      <button
        class="bg-primary text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-dark transition-colors w-full sm:w-auto"
        hx-get="/jobs"
        hx-target="#jobs-container"
      >
        Refresh Matches
      </button>
    </div>
  </div>

  <!-- Flexible Job Cards Container -->
  <div id="jobs-container" class="flex-1 flex flex-col relative">
    {{template "partials/jobs-container" .}}
  </div>
</div>
{{end}}